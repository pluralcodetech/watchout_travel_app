<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
    <title>Document</title>

    <!--Chart CDN-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.6.0/chart.min.js" integrity="sha512-GMGzUEevhWh8Tc/njS0bDpwgxdCJLQBWG3Z2Ct+JGOpVnEmjvNx6ts4v6A2XJf1HOrtOsfhv3hBKpK9kE5z8AQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

    <!--Bootstrap CDN-->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/css/bootstrap.min.css" integrity="sha384-B0vP5xmATw1+K9KRQjQERJvTumQW0nPEzvF6L/Z6nronJ3oUOFUFpCjEUQouq2+l" crossorigin="anonymous">

    <!--Custom CSS-->
    <link rel="stylesheet" href="../style.css">
</head>
<body>

    <input type="checkbox" id="sidebar-toggle">
    <div class="sidebar">
        <center>
            <span class="text-center"><img src="../assets/logow.png" class="image-logo mt-5 mr-5 img-fluid"></span>
        </center>
        <div class="sidebar-header">
            <h3 class="brand">
            </h3>
            <label for="sidebar-toggle" class="ti-menu-alt"></label>
        </div>
        <div class="sidebar-menu">
            <ul>
                <li>
                    <a href="">
                        <span><img src="../assets/ci_dashboard.png"></span>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <span><img src="../assets/br.png"></span>
                        <span>Booking</span>
                    </a>
                </li>
                <!-- <li>
                    <a href="">
                        <span><img src="../assets/br.png"></span>
                        <span>Add Branch</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <span><img src="../assets/Vector.png"></span>
                        <span>Branches</span>
                    </a>
                </li>
                <li>
                    <a href="">
                        <span><img src="../assets/settings.png"></span>
                        <span>Settings</span>
                    </a>
                </li> -->
            </ul>
        </div>
    </div>

    <div class="main-content">
        <header>
            <div>
                <h3 class="font-weight-700">Dashboard</h3>
            </div>

            <div class="search-wrapper">
                <!--<span class="ti-search"><img src="../assets/search.png"></span>-->
                <input type="search" placeholder="search" size="70">
            </div>
        </header>

        <main>
            <div class="search-wrapper2 d-lg-none">
                <!--<span class="ti-search"><img src="../assets/search.png"></span>-->
                <input type="search" placeholder="search" size="70">
            </div>
            <div class="dash-cards">
                <div class="card-single">
                    <div class="card-body">
                        <span class="ti-line-graph"><img src="../assets/revenue.png"></span>
                        <div>
                            <h6>Today's Revenue</h6>
                            <h5>₦765.41</h5>
                        </div>
                    </div>
                </div>
                <div class="card-single">
                    <div class="card-body">
                        <span class="ti-line-commission"><img src="../assets/com.png"></span>
                        <div>
                            <h6>Today's Commission</h6>
                            <h5>₦765.41</h5>
                        </div>
                    </div>
                </div>
                <div class="card-single">
                    <div class="card-body">
                        <span class="ti-line-passengers"><img src="../assets/mul-pss.png"></span>
                        <div>
                            <h6>Today's Passengers</h6>
                            <h5>75</h5>
                        </div>
                    </div>
                </div>
                <div class="card-single">
                    <div class="card-body">
                        <span class="ti-line-graph"><img src="../assets/bookings2.png"></span>
                        <div>
                            <h6>Today's Bookings</h6>
                            <h5>722</h5>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-sm-12 col-md-12 col-lg-6">
                    <div class="jumbotron jumbotron-fluid jumbo-bg-color mt-5 p-5">
                        <h5>Total Revenue</h5>
                        <canvas id="myChart"></canvas>

                        <script>
                            let myChart = document.getElementById("myChart").getContext('2d');
        
                            let revenueChart = new Chart(myChart, {
                                type: 'line',
                                data: {
                                    labels:[],
                                    datasets:[{
                                        label: 'Revenue',
                                        data: [
                                        ],
        
                                        backgroundColor: '#50c455',
                                        fontSize: 20
                                    }]
                                },
                                
                                options: {
                                    title: {
                                        display:true,
                                        text:'Monthly Revenues',
                                        fontSize:25
                                    }
                                }
                            });

                            let test = localStorage.getItem('branchData');
                            let convertTest = JSON.parse(test);
                            // console.log(convertTest.token);
                            let token = convertTest.token;
                            console.log(token);

                            let myHeaders = new Headers();

                            myHeaders.append("Authorization", `Bearer ${token}`);

                            let requestOptions = {
                                method: 'GET',
                                headers: myHeaders,
                                redirect: 'follow'
                            };

                            fetch("https://watchoutachan.herokuapp.com/api/branch/branchgraph", requestOptions)
                            .then(response => response.json())
                            .then(result => {
                                console.log(result)
                                revenueChart.data.datasets[0].data = result;

                            })
                            .catch(error => {
                                console.log('error', error)
                                if(error) {
                                    redirect: window.location.replace("../frontend/index.html")
                                }
                            });

                        </script>
                    </div>
                </div>
                <div class="col-sm-12 col-md-12 col-lg-6">
                    <div class="jumbotron jumbotron-fluid jumbo-bg-color mt-5 p-5">
                        <h5>Total Commission</h5>
                        <canvas id="myChart2"></canvas>

                        <script>
                            

                            let myChart2 = document.getElementById("myChart2").getContext('2d');
        
                            let revenueChart2 = new Chart(myChart2, {
                                type: 'line',
                                data: {
                                    labels:[],
                                    datasets:[{
                                        label: 'Commission',
                                        data: [
                                            
                                        ],
        
                                        backgroundColor: '#50c455',
                                        fontSize: 20
                                    }]
                                },
                                
                                options: {
                                    // title: {
                                    //     display:true,
                                    //     text:'Monthly Revenues',
                                    //     fontSize:25
                                    // }
                                }
                            });

                            let test2 = localStorage.getItem('branchData');
                            let convertTest2 = JSON.parse(test2);
                            // console.log(convertTest.token);
                            let token2 = convertTest2.token;
                            console.log(token2);

                            let myHeaders2 = new Headers();

                            myHeaders2.append("Authorization", `Bearer ${token2}`);

                            var requestMethod = {
                                method: 'GET',
                                headers: myHeaders2,
                                redirect: 'follow'
                            };

                            fetch("https://watchoutachan.herokuapp.com/api/branch/branchcomgraph", requestOptions)
                            .then(response => response.json())
                            .then(result => {
                                console.log(result)
                                revenueChart2.data.datasets[0].data = result;
                            })
                            .catch(error => {
                                console.log('error', error)
                                if(error) {
                                    redirect: window.location.replace("../frontend/index.html")
                                }
                            });
                        </script>
                    </div>
                </div>
            </div>
            <div class="jumbotron jumbotron-fluid jumbo-bg-color mt-5">
                <div class="container">
                    <h4 class="font-weight-900">Recent Bookings</h4>

                    <table class="table table-responsive-lg">
                        <thead class="black white-text bg-color table-text-color">
                          <tr>
                            <th scope="col">Ticket ID</th>
                            <th scope="col">Customer</th>
                            <th scope="col">Location</th>
                            <th scope="col">Destination</th>
                            <th scope="col">Date and Time</th>
                            <th scope="col">Booking Status</th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <th scope="row">#2458</th>
                            <td>Darrel Williamson</td>
                            <td>Corona, Michigan</td>
                            <td>Corona, Michigan</td>
                            <td>03/03/12, 22:43</td>
                            <td>
                                <button class="button-table-pink">pending</button>
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">#3530</th>
                            <td>Dustin Wilson</td>
                            <td>Westminister, Kentucky</td>
                            <td>Westminister, Kentucky</td>
                            <td>04/03/19, 16:42</td>
                            <td>
                                <button class="button-table-green">Completed</button>
                            </td>
                          </tr>
                          <tr>
                            <th scope="row">#4540</th>
                            <td>Jerome Simmons</td>
                            <td>Desato, Oklahoma</td>
                            <td>Desato, Oklahoma</td>
                            <td>01/28/19 14:11</td>
                            <td><button class="button-table-green">Completed</button></td>
                          </tr>
                          <tr>
                              <th scope="row">#9498</th>
                              <td>Norma Russell</td>
                              <td>San Jose, South Dakota</td>
                              <td>San Jose, South Dakota</td>
                              <td>03/17/12 08:48</td>
                              <td>
                                <button class="button-table">Cancelled</button>
                             </td>
                          </tr>
                        </tbody>
                    </table>
                </div>
            </div> 
        </main>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.0/dist/js/bootstrap.bundle.min.js" integrity="sha384-Piv4xVNRyMGpqkS2by6br4gNJ7DXjqk09RmUpJ8jgGtD7zP9yug3goQfGII0yAns" crossorigin="anonymous"></script>
</body>
</html>